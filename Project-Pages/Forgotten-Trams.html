<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Forgotten Trams - SAMJSENIOR.GD</title>
  <style>
    /* --- FONT IMPORTS FROM LOCAL FILES --- */
    @font-face {
      font-family: 'PP Right Slab';
      src: url('../fonts/PPRightSlab-Medium.woff2') format('woff2'),
           url('../fonts/PPRightSlab-Medium.woff') format('woff');
      font-style: normal;
      font-display: swap;
      font-weight: 500;
    }

    @font-face {
      font-family: 'PP Right Slab';
      src: url('../fonts/PPRightSlab-Bold.woff2') format('woff2'),
           url('../fonts/PPRightSlab-Bold.woff') format('woff');
      font-style: normal;
      font-display: swap;
      font-weight: 700;
    }

    @font-face {
      font-family: 'PP Right Grotesk';
      src: url('../fonts/PPRightGrotesk-Light.woff2') format('woff2'),
           url('../fonts/PPRightGrotesk-Light.woff') format('woff');
      font-style: normal;
      font-display: swap;
      font-weight: 300;
    }

    @font-face {
      font-family: 'PP Right Grotesk';
      src: url('../fonts/PPRightGrotesk-Medium.woff2') format('woff2'),
           url('../fonts/PPRightGrotesk-Medium.woff') format('woff');
      font-style: normal;
      font-display: swap;
      font-weight: 500;
    }

    /* --- BASIC RESET --- */
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
      color: #3a312d;
      
      /* Optical alignment enhancements for ALL text */
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-feature-settings: "kern" 1, "liga" 1;
    }

    body {
      overflow-x: hidden;
      overflow-y: hidden; /* Keep body hidden */
      font-family: 'PP Right Grotesk', sans-serif;
      font-weight: 300;
      height: 100vh;
      background: #ffffff;
      color: #3a312d;
    }

    :root {
      --margin-top: 30px;
      --margin-bottom: 30px;
      --margin-left: 30px;
      --margin-right: 30px;
      --cols: 12;
      --col-gap: 30px;
      --rows: 18;
      --row-gap: 15px;
    }

    .page {
      display: grid;
      height: 100vh; /* Back to 100vh */
      padding: var(--margin-top) var(--margin-right) var(--margin-bottom) var(--margin-left);
      grid-template-columns: repeat(var(--cols), 1fr);
      grid-column-gap: var(--col-gap);
      grid-template-rows: repeat(var(--rows), 1fr);
      grid-row-gap: var(--row-gap);
      position: relative;
      min-width: 1920px;
    }

    /* --- NAVIGATION --- */
    .logo {
      grid-column: 1 / span 2;
      grid-row: 1 / span 1;
      display: flex;
      align-items: center;
      font-family: 'PP Right Slab';
      font-weight: 700;
      font-size: 20pt;
      line-height: 20pt;
      letter-spacing: 0.015em;
      z-index: 1;
      
      /* Additional optical alignment */
      text-wrap: pretty;
      hanging-punctuation: first last;
    }

    .menu {
      grid-column: 9 / span 4;
      grid-row: 1 / span 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: 'PP Right Grotesk';
      font-weight: 500;
      font-size: 20pt;
      line-height: 20pt;
      letter-spacing: 0;
      z-index: 1;
      
      /* Additional optical alignment */
      text-wrap: pretty;
      hanging-punctuation: first last;
    }

    .menu a { 
      text-decoration: none; 
      color: #3a312d; 
    }

    /* Always underline the Projects menu item */
    .menu a.projects {
      text-decoration: underline;
    }

    /* --- SUB NAVIGATION --- */
    .sub-nav {
      grid-column: 1 / span 8;
      grid-row: 3 / span 1;
      display: flex;
      align-items: center;
      gap: 30px;
      font-family: 'PP Right Slab';
      font-weight: 300;
      font-size: 15pt;
      line-height: 15pt;
      letter-spacing: 0;
      z-index: 1;
    }

    .sub-nav a, .sub-nav button {
      background: none;
      border: none;
      font-family: inherit;
      font-size: inherit;
      cursor: pointer;
      text-decoration: none;
      color: #3a312d;
      transition: letter-spacing 0.2s ease; /* Only transition letter-spacing */
      padding: 0;
      font-weight: 300;
    }

    .sub-nav a:hover, .sub-nav button:hover {
      font-weight: 500; /* Instant font-weight change */
      letter-spacing: 0.025em;
    }

    /* --- IMAGE GALLERY --- */
    .project-gallery {
      grid-column: 1 / span 8;
      grid-row: 4 / span 14;
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    .gallery-content {
      width: 100%;
      height: 100%;
      background: #eeeeee;
      border: 0px solid #999;
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      object-fit: cover;
      cursor: zoom-in;
    }

    .gallery-content.active {
      display: block;
    }

    /* Video specific styles */
    .gallery-content.video {
      object-fit: contain;
      background: #000;
    }

    .gallery-nav {
      position: absolute;
      bottom: 15px;
      right: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 15pt;
      line-height: 15pt;
      letter-spacing: 0;
      background-color: #ffffff; /* Changed to solid white */
      padding: 5px 10px;
      border-radius: 3px;
      z-index: 10;
    }

    .nav-btn {
      background: none;
      border: none;
      font-family: inherit;
      font-size: inherit;
      cursor: pointer;
      padding: 0 5px;
      transition: opacity 0.2s;
    }

    .nav-btn:hover {
      opacity: 0.7;
    }

    /* --- PROJECT TITLE SECTION --- */
    .project-title {
      grid-column: 9 / span 4;
      grid-row: 4 / span 2;
      display: flex;
      align-items: flex-start;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 45pt;
      line-height: 1;
      letter-spacing: 0;
      white-space: normal;
      color: #3a312d;
      
      /* Additional optical alignment */
      text-wrap: pretty;
      hanging-punctuation: first last;
    }

    /* --- PROJECT BODY COPY --- */
    .project-body {
      grid-column: 9 / span 4;
      grid-row: 7 / span 10;
      font-family: 'PP Right Grotesk';
      font-weight: 300;
      font-size: 15pt;
      line-height: 1.2;
      letter-spacing: 0;
      color: #3a312d;
      padding-right: 15px;
      
      /* Optical alignment enhancements */
      text-wrap: pretty;
      hanging-punctuation: first last;
      
      /* Fallbacks for widows/orphans */
      orphans: 2;
      widows: 2;
    }

    /* --- COLOPHON --- */
    .colophon {
      grid-column: 9 / span 4;
      grid-row: 17 / span 1;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 15pt;
      line-height: 15pt;
      letter-spacing: 0;
      display: flex;
      align-items: flex-end;
      text-wrap: pretty;
      hanging-punctuation: first last;
      z-index: 10;
      cursor: pointer;
      transition: letter-spacing 0.2s ease; /* Only transition letter-spacing */
    }

    .colophon:hover {
      font-weight: 600; /* Instant font-weight change */
      letter-spacing: 0.025em;
    }

    /* --- COLOPHON CONTENT STYLES --- */
    .colophon-content {
      height: 100%;
      overflow-y: auto; /* Keep scroll functionality */
      padding-right: 10px;
      /* Hide scrollbar but keep functionality */
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      
      /* Subtle fade effect at bottom to indicate more content */
      mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
      -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
      transition: mask-image 0.3s ease, -webkit-mask-image 0.3s ease;
    }

    /* Full opacity when scrolled to bottom */
    .colophon-content.scrolled-to-bottom {
      mask-image: none;
      -webkit-mask-image: none;
    }

    /* Hide scrollbar for WebKit browsers */
    .colophon-content::-webkit-scrollbar {
      display: none;
    }

    .colophon-section {
      margin-bottom: 30px;
    }

    /* ADDED BACK: Border styling with 50% opacity */
    .colophon-section h3 {
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 18pt;
      margin-bottom: 15px;
      border-bottom: 1px solid rgba(58, 49, 45, 0.5); /* 50% opacity */
      padding-bottom: 5px;
    }

    .colophon-section p {
      margin-bottom: 8px;
      font-family: 'PP Right Grotesk';
      font-weight: 300;
      font-size: 13pt;
      line-height: 1.3;
    }

    .colophon-list {
      list-style-type: none;
      margin-bottom: 0;
    }

    .colophon-list li {
      margin-bottom: 8px;
      font-family: 'PP Right Grotesk';
      font-weight: 300;
      font-size: 13pt;
      line-height: 1.3;
      padding-left: 0;
    }

    .spec-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      padding-bottom: 5px;
      border-bottom: 1px solid rgba(58, 49, 45, 0.5); /* 50% opacity */
    }

    .spec-asset {
      font-weight: 500;
    }

    .spec-origin {
      color: rgba(58, 49, 45, 0.7);
    }

    /* Two-column layout for Project Scope and Disciplines */
    .two-column-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* ADDED BACK: Border styling with 50% opacity */
    .two-column-section h3 {
      grid-column: 1 / -1;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 18pt;
      margin: 0 0 12px 0;
      border-bottom: 1px solid rgba(58, 49, 45, 0.5); /* 50% opacity */
      padding-bottom: 5px;
    }

    .column {
      display: flex;
      flex-direction: column;
    }

    /* FIXED: Completely remove spacing above subheadings */
    .column h4 {
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 14pt;
      margin: 0 0 8px 0;
      padding: 0;
      height: auto;
      line-height: 1;
    }

    .column-content {
      margin: 0;
      padding: 0;
    }

    /* Scroll indicator animation */
    @keyframes subtle-pulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.7; }
    }

    .scroll-indicator {
      position: absolute;
      bottom: 5px;
      right: 15px;
      font-size: 10pt;
      color: rgba(58, 49, 45, 0.5);
      animation: subtle-pulse 2s infinite;
      pointer-events: none;
      font-family: 'PP Right Grotesk';
      font-weight: 300;
      transition: opacity 0.3s ease;
    }

    .scroll-indicator.hidden {
      opacity: 0;
      animation: none;
    }

    /* --- FULL SCREEN OVERLAY --- */
    .fullscreen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 255, 255, 0.98);
      display: none;
      z-index: 1000;
      cursor: zoom-out;
      /* Use the same grid system as main page */
      padding: var(--margin-top) var(--margin-right) var(--margin-bottom) var(--margin-left);
      grid-template-columns: repeat(var(--cols), 1fr);
      grid-column-gap: var(--col-gap);
      grid-template-rows: repeat(var(--rows), 1fr);
      grid-row-gap: var(--row-gap);
    }

    .fullscreen-content-container {
      grid-column: 1 / span 12; /* Full width - all columns */
      grid-row: 1 / span 17; /* Takes first 17 rows */
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
      position: relative;
    }

    .fullscreen-content {
      width: 100%;
      height: 100%;
      object-fit: contain;
      cursor: default;
    }

    .fullscreen-close {
      grid-column: 2 / span 1; /* Positioned at column 1 */
      grid-row: 18 / span 1; /* Row 18 */
      display: flex;
      align-items: flex-end;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 15pt;
      line-height: 15pt;
      letter-spacing: 0;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      color: #3a312d;
      text-decoration: none;
    }

    .fullscreen-close:hover {
      opacity: 0.7;
    }

    .fullscreen-navigation {
      grid-column: 11 / span 1; /* Positioned at column 12 */
      grid-row: 18 / span 1; /* Row 18 */
      display: flex;
      justify-content: flex-end;
      align-items: flex-end;
      font-family: 'PP Right Slab';
      font-weight: 500;
      font-size: 15pt;
      line-height: 15pt;
      letter-spacing: 0;
      background: none;
      padding: 0;
      border: none;
      color: #3a312d;
      gap: 10px;
    }

    /* Ensure text doesn't stack vertically */
    .fullscreen-navigation span,
    .fullscreen-navigation button {
      white-space: nowrap;
    }

    /* Hide regular gallery nav when fullscreen is active */
    body.fullscreen-active .gallery-nav {
      display: none;
    }

    /* Video controls */
    video {
      width: 100%;
      height: 100%;
    }

    /* Video play button overlay */
    .video-play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 5;
      transition: all 0.3s ease;
    }

    .video-play-button:hover {
      background: rgba(255, 255, 255, 1);
      transform: translate(-50%, -50%) scale(1.1);
    }

    .video-play-button::after {
      content: '▶';
      font-size: 30px;
      color: #3a312d;
      margin-left: 5px;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="logo">SAMJSENIOR.GD</div>

    <nav class="menu">
      <a href="../Menu-Pages/about.html" class="about">About</a>
      <a href="../Menu-Pages/projects.html" class="projects">Projects</a>
      <a href="../Menu-Pages/archive.html" class="archive">Archive</a>
      <a href="../Menu-Pages/theory.html" class="theory">Theory</a>
      <a href="../Menu-Pages/contact.html" class="contact">Contact</a>
    </nav>

    <!-- SUB NAVIGATION -->
    <div class="sub-nav">
      <a href="../Menu-Pages/archive.html">Archive ↖</a>
      <a href="../Project-Pages/Yorkshire-Stout-&-Porter.html" class="sub-nav-btn next">Next →</a>
      <a href="../Project-Pages/Seed-Freedom-Campaign.html" class="sub-nav-btn prev">Back ←</a>
    </div>

    <div class="project-gallery">
      <!-- Content placeholders will be dynamically added by JavaScript -->
      <div class="gallery-nav">
        <button class="nav-btn prev">←</button>
        <span class="image-counter">1 / 10</span>
        <button class="nav-btn next">→</button>
      </div>
    </div>

    <div class="project-title" id="project-title">Forgotten<br>Trams</div>
    <div class="project-body" id="project-body">
      Forgotten Trams is a photographic documentation project exploring abandoned tram systems across Europe. Through a series of large-format photographs and archival research, the project reveals the hidden infrastructure of urban transportation systems that have been left to decay.<br><br>
      
      The work focuses on eight different tram depots and maintenance yards in post-industrial cities, capturing the architectural details of control rooms, workshops, and abandoned vehicles. Each photograph is accompanied by archival materials—timetables, maintenance logs, and operator notes—that tell the story of these once-vital urban arteries.<br><br>
      
      By presenting these spaces as both architectural artifacts and social documents, the project invites reflection on urban decay, transportation history, and the changing relationship between cities and their infrastructure. The carefully composed photographs transform industrial decay into aesthetic contemplation.
    </div>

    <div class="colophon" id="colophon">Colophon ⮥</div>
  </div>

  <script>
    // Project data for Forgotten Trams
    const projectData = {
      title: "Forgotten<br>Trams",
      slug: "Forgotten-Trams", // Title case folder name with hyphen
      contentCount: 6, // Total number of content items (images only)
      contentTypes: [
        "image",  // 001
        "image",  // 002
        "image",  // 003
        "image",  // 004
        "image",  // 005
        "image",  // 006 
      ],
      body: `Forgotten Trams is a photographic documentation project exploring abandoned tram systems across Europe. Through a series of large-format photographs and archival research, the project reveals the hidden infrastructure of urban transportation systems that have been left to decay.<br><br>
      
      The work focuses on eight different tram depots and maintenance yards in post-industrial cities, capturing the architectural details of control rooms, workshops, and abandoned vehicles. Each photograph is accompanied by archival materials—timetables, maintenance logs, and operator notes—that tell the story of these once-vital urban arteries.<br><br>
      
      By presenting these spaces as both architectural artifacts and social documents, the project invites reflection on urban decay, transportation history, and the changing relationship between cities and their infrastructure. The carefully composed photographs transform industrial decay into aesthetic contemplation.`,
      colophon: {
        projectScope: {
          outcomes: [
            "Series of 24 large-format photographic prints",
            "Archival research documentation",
            "Exhibition catalog with historical context",
            "Online archive of tram infrastructure"
          ],
          features: [
            "Large format 4x5 film photography",
            "Archival research across 8 European cities",
            "Historical timeline of tram system decommissioning",
            "Comparative analysis of post-industrial urban spaces",
            "High-resolution digital scans for preservation",
            "Geographic mapping of abandoned tram networks"
          ]
        },
        specifications: [
          { asset: "PP Right Grotesk", origin: "Pangram Pangram Foundry" },
          { asset: "PP Right Slab", origin: "Pangram Pangram Foundry" },
          { asset: "4x5 Large Format Camera", origin: "Technical Equipment" },
          { asset: "Kodak Portra 160 Film", origin: "Photographic Materials" },
          { asset: "Archival Research", origin: "City Transportation Archives" },
          { asset: "Digital Scanning", origin: "High-resolution Preservation" },
          { asset: "Historical Documentation", origin: "Urban Transportation History" },
          { asset: "Geographic Mapping", origin: "Spatial Analysis" }
        ],
        disciplines: [
          "Photographic Documentation",
          "Archival Research",
          "Urban Exploration",
          "Transportation History",
          "Architectural Photography",
          "Historical Preservation",
          "Urban Studies",
          "Geographic Documentation"
        ]
      }
    };

    // Global variables for gallery state
    let currentIndex = 0;
    let galleryContent = [];

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      // Set project content from JSON data
      document.getElementById('project-title').innerHTML = projectData.title;
      document.getElementById('project-body').innerHTML = projectData.body;

      // Initialize gallery with content
      initializeGallery();

      // Set up gallery navigation
      const prevBtn = document.querySelector('.gallery-nav .nav-btn.prev');
      const nextBtn = document.querySelector('.gallery-nav .nav-btn.next');
      const counter = document.querySelector('.gallery-nav .image-counter');

      function updateGallery() {
        // Hide all content
        galleryContent.forEach(content => {
          content.element.classList.remove('active');
        });
        
        // Show current content
        galleryContent[currentIndex].element.classList.add('active');
        
        // Update counter
        counter.textContent = `${currentIndex + 1} / ${projectData.contentCount}`;
      }

      prevBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentIndex = (currentIndex - 1 + projectData.contentCount) % projectData.contentCount;
        updateGallery();
      });

      nextBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentIndex = (currentIndex + 1) % projectData.contentCount;
        updateGallery();
      });

      // Initialize gallery
      updateGallery();

      // Sub-navigation functionality
      const subNavPrev = document.querySelector('.sub-nav .prev');
      const subNavNext = document.querySelector('.sub-nav .next');
      
      // Placeholder functions for sub-navigation
      subNavPrev.addEventListener('click', function() {
        // In a real implementation, this would navigate to the previous project
        console.log('Navigate to previous project');
        // Example: window.location.href = 'previous-project.html';
      });
      
      subNavNext.addEventListener('click', function() {
        // In a real implementation, this would navigate to the next project
        console.log('Navigate to next project');
        // Example: window.location.href = 'next-project.html';
      });

      // Colophon toggle functionality
      const colophonElement = document.getElementById('colophon');
      const projectBody = document.getElementById('project-body');
      let isShowingColophon = false;
      const originalBodyContent = projectBody.innerHTML;

      colophonElement.addEventListener('click', function() {
        if (!isShowingColophon) {
          // Show colophon
          projectBody.innerHTML = generateColophonHTML();
          colophonElement.innerHTML = 'Description ⮥';
          isShowingColophon = true;
          
          // Add scroll indicator after a brief delay
          setTimeout(addScrollIndicator, 100);
        } else {
          // Show original description
          projectBody.innerHTML = originalBodyContent;
          colophonElement.innerHTML = 'Colophon ⮥';
          isShowingColophon = false;
          
          // Remove scroll indicator
          removeScrollIndicator();
        }
      });

      // Function to add scroll indicator
      function addScrollIndicator() {
        const colophonContent = document.querySelector('.colophon-content');
        if (colophonContent && colophonContent.scrollHeight > colophonContent.clientHeight) {
          const indicator = document.createElement('div');
          indicator.className = 'scroll-indicator';
          indicator.innerHTML = 'scroll';
          colophonContent.appendChild(indicator);
          
          // Add scroll event listener to handle fade and indicator
          colophonContent.addEventListener('scroll', handleColophonScroll);
          // Check initial state
          handleColophonScroll();
        }
      }

      // Function to handle scroll events
      function handleColophonScroll() {
        const colophonContent = document.querySelector('.colophon-content');
        const indicator = document.querySelector('.scroll-indicator');
        
        if (colophonContent && indicator) {
          const scrollBottom = colophonContent.scrollHeight - colophonContent.scrollTop - colophonContent.clientHeight;
          const isAtBottom = scrollBottom < 10; // 10px threshold
          
          if (isAtBottom) {
            colophonContent.classList.add('scrolled-to-bottom');
            indicator.classList.add('hidden');
          } else {
            colophonContent.classList.remove('scrolled-to-bottom');
            indicator.classList.remove('hidden');
          }
        }
      }

      // Function to remove scroll indicator
      function removeScrollIndicator() {
        const indicator = document.querySelector('.scroll-indicator');
        const colophonContent = document.querySelector('.colophon-content');
        
        if (indicator) {
          indicator.remove();
        }
        if (colophonContent) {
          colophonContent.removeEventListener('scroll', handleColophonScroll);
          colophonContent.classList.remove('scrolled-to-bottom');
        }
      }

      // Function to generate colophon HTML
      function generateColophonHTML() {
        const colophon = projectData.colophon;
        
        let html = '<div class="colophon-content">';
        
        // Project Scope & Disciplines section (2 columns)
        html += '<div class="two-column-section">';
        html += '<h3>Project Scope & Disciplines</h3>';
        
        // Left column - Outcomes
        html += '<div class="column">';
        html += '<h4>Outcomes</h4>';
        html += '<div class="column-content">';
        html += '<ul class="colophon-list">';
        colophon.projectScope.outcomes.forEach(outcome => {
          html += `<li>${outcome}</li>`;
        });
        html += '</ul>';
        html += '</div>';
        html += '</div>';
        
        // Right column - Disciplines
        html += '<div class="column">';
        html += '<h4>Disciplines</h4>';
        html += '<div class="column-content">';
        html += '<ul class="colophon-list">';
        colophon.disciplines.forEach(discipline => {
          html += `<li>${discipline}</li>`;
        });
        html += '</ul>';
        html += '</div>';
        html += '</div>';
        
        html += '</div>';
        
        // Specifications section (2 columns)
        html += '<div class="two-column-section">';
        html += '<h3>Specifications</h3>';
        
        // Left column - Tools & Resources
        html += '<div class="column">';
        html += '<h4>Materials & Methods</h4>';
        html += '<div class="column-content">';
        html += '<ul class="colophon-list">';
        colophon.specifications.forEach(spec => {
          html += `<li>${spec.asset}</li>`;
        });
        html += '</ul>';
        html += '</div>';
        html += '</div>';
        
        // Right column - Origins (aligned with Disciplines column above)
        html += '<div class="column">';
        html += '<h4 style="visibility: hidden;">Spacer</h4>'; // Hidden spacer for alignment
        html += '<div class="column-content">';
        html += '<ul class="colophon-list">';
        colophon.specifications.forEach(spec => {
          html += `<li>${spec.origin}</li>`;
        });
        html += '</ul>';
        html += '</div>';
        html += '</div>';
        
        html += '</div>';
        
        // Special Features section
        html += '<div class="colophon-section">';
        html += '<h3>Project Features</h3>';
        html += '<ul class="colophon-list">';
        colophon.projectScope.features.forEach(feature => {
          html += `<li>${feature}</li>`;
        });
        html += '</ul>';
        html += '</div>';
        
        html += '</div>';
        
        return html;
      }

      // Gallery initialization with fullscreen functionality
      function initializeGallery() {
        const gallery = document.querySelector('.project-gallery');
        const galleryNavCounter = document.querySelector('.gallery-nav .image-counter');
        
        // Update counter to show total items
        galleryNavCounter.textContent = `1 / ${projectData.contentCount}`;
        
        // Clear gallery
        gallery.innerHTML = '';
        
        // Create gallery content (images and videos based on contentTypes array)
        for (let i = 0; i < projectData.contentCount; i++) {
          const imgNumber = String(i + 1).padStart(3, '0'); // 001, 002, 003...
          const contentType = projectData.contentTypes[i]; // "image" or "video"
          const isVideo = contentType === "video";
          
          let contentElement;
          
          if (isVideo) {
            // Create video element
            const video = document.createElement('video');
            video.className = 'gallery-content video';
            video.playsInline = true;
            video.preload = 'metadata';
            
            // Video source with title case naming
            video.innerHTML = `
              <source src="../content/projects/${projectData.slug}/${imgNumber}-Forgotten-Trams.mp4" type="video/mp4">
              Your browser does not support the video tag.
            `;
            
            // Create play button overlay
            const playButton = document.createElement('div');
            playButton.className = 'video-play-button';
            playButton.addEventListener('click', function(e) {
              e.stopPropagation();
              video.play();
              playButton.style.display = 'none';
            });
            
            video.appendChild(playButton);
            
            // Pause video when it ends
            video.addEventListener('ended', function() {
              playButton.style.display = 'flex';
            });
            
            video.addEventListener('pause', function() {
              playButton.style.display = 'flex';
            });
            
            contentElement = video;
          } else {
            // Create image element with title case naming
            const img = document.createElement('img');
            img.className = 'gallery-content';
            img.loading = 'lazy';
            
            // Single image source for both gallery and fullscreen
            img.src = `../content/projects/${projectData.slug}/${imgNumber}-Forgotten-Trams.jpg`;
            img.alt = `${projectData.title.replace('<br>', ' ')} - Content ${i + 1}`;
            
            // Set object-fit for proper cropping
            img.style.objectFit = 'cover';
            
            contentElement = img;
          }
          
          contentElement.dataset.index = i;
          contentElement.dataset.isVideo = isVideo;
          contentElement.dataset.contentType = contentType;
          
          // Add click event for fullscreen
          contentElement.addEventListener('click', () => openFullscreen(i));
          
          gallery.appendChild(contentElement);
          
          galleryContent.push({
            element: contentElement,
            index: i,
            isVideo: isVideo,
            contentType: contentType
          });
        }

        // Add back the navigation
        const galleryNav = document.createElement('div');
        galleryNav.className = 'gallery-nav';
        galleryNav.innerHTML = `
          <button class="nav-btn prev">←</button>
          <span class="image-counter">1 / ${projectData.contentCount}</span>
          <button class="nav-btn next">→</button>
        `;
        gallery.appendChild(galleryNav);

        // Create fullscreen overlay
        const fullscreenOverlay = document.createElement('div');
        fullscreenOverlay.className = 'fullscreen-overlay';
        
        // Create container for content
        const contentContainer = document.createElement('div');
        contentContainer.className = 'fullscreen-content-container';
        
        // Fullscreen content will be created dynamically
        const fullscreenContent = document.createElement('div');
        fullscreenContent.className = 'fullscreen-content';
        
        // Create separate close button at column 1
        const fullscreenClose = document.createElement('button');
        fullscreenClose.className = 'fullscreen-close';
        fullscreenClose.innerHTML = 'Back ←';
        
        // Create navigation at column 12
        const fullscreenNavigation = document.createElement('div');
        fullscreenNavigation.className = 'fullscreen-navigation';
        fullscreenNavigation.innerHTML = `
          <button class="nav-btn prev">←</button>
          <span class="image-counter">1 / ${projectData.contentCount}</span>
          <button class="nav-btn next">→</button>
        `;
        
        contentContainer.appendChild(fullscreenContent);
        fullscreenOverlay.appendChild(contentContainer);
        fullscreenOverlay.appendChild(fullscreenClose);
        fullscreenOverlay.appendChild(fullscreenNavigation);
        document.body.appendChild(fullscreenOverlay);

        // Fullscreen functionality
        function openFullscreen(index) {
          currentIndex = index;
          const currentContent = galleryContent[currentIndex];
          
          // Clear previous content
          fullscreenContent.innerHTML = '';
          
          if (currentContent.isVideo) {
            // Create video element for fullscreen with title case naming
            const video = document.createElement('video');
            video.className = 'fullscreen-content';
            video.controls = true;
            video.autoplay = true;
            video.playsInline = true;
            
            const videoNumber = String(currentIndex + 1).padStart(3, '0');
            video.innerHTML = `
              <source src="../content/projects/${projectData.slug}/${videoNumber}-Forgotten-Trams.mp4" type="video/mp4">
              Your browser does not support the video tag.
            `;
            
            fullscreenContent.appendChild(video);
          } else {
            // Create image element for fullscreen with title case naming
            const img = document.createElement('img');
            img.className = 'fullscreen-content';
            img.style.objectFit = 'contain';
            
            const imgNumber = String(currentIndex + 1).padStart(3, '0');
            img.src = `../content/projects/${projectData.slug}/${imgNumber}-Forgotten-Trams.jpg`;
            img.alt = `${projectData.title.replace('<br>', ' ')} - Content ${currentIndex + 1}`;
            
            fullscreenContent.appendChild(img);
          }
          
          fullscreenOverlay.style.display = 'grid';
          document.body.classList.add('fullscreen-active');
          updateFullscreenCounter();
          updateGallery();
        }

        function closeFullscreen() {
          // Stop any playing video
          const video = fullscreenContent.querySelector('video');
          if (video) {
            video.pause();
            video.currentTime = 0;
          }
          
          fullscreenOverlay.style.display = 'none';
          document.body.classList.remove('fullscreen-active');
          updateGallery();
        }

        function updateFullscreenCounter() {
          // Update both counters to stay in sync
          const galleryCounter = document.querySelector('.gallery-nav .image-counter');
          const fullscreenCounter = fullscreenNavigation.querySelector('.image-counter');
          
          galleryCounter.textContent = `${currentIndex + 1} / ${projectData.contentCount}`;
          fullscreenCounter.textContent = `${currentIndex + 1} / ${projectData.contentCount}`;
        }

        // Event listeners for fullscreen navigation
        fullscreenNavigation.querySelector('.prev').addEventListener('click', function(e) {
          e.stopPropagation();
          // Stop any playing video first
          const video = fullscreenContent.querySelector('video');
          if (video) {
            video.pause();
            video.currentTime = 0;
          }
          
          currentIndex = (currentIndex - 1 + projectData.contentCount) % projectData.contentCount;
          openFullscreen(currentIndex);
        });

        fullscreenNavigation.querySelector('.next').addEventListener('click', function(e) {
          e.stopPropagation();
          // Stop any playing video first
          const video = fullscreenContent.querySelector('video');
          if (video) {
            video.pause();
            video.currentTime = 0;
          }
          
          currentIndex = (currentIndex + 1) % projectData.contentCount;
          openFullscreen(currentIndex);
        });

        // Event listeners
        fullscreenClose.addEventListener('click', closeFullscreen);
        fullscreenOverlay.addEventListener('click', (e) => {
          if (e.target === fullscreenOverlay) closeFullscreen();
        });

        // Navigation with keyboard
        document.addEventListener('keydown', (e) => {
          if (fullscreenOverlay.style.display === 'grid') {
            if (e.key === 'Escape') closeFullscreen();
            if (e.key === 'ArrowLeft') {
              // Stop any playing video first
              const video = fullscreenContent.querySelector('video');
              if (video) {
                video.pause();
                video.currentTime = 0;
              }
              
              currentIndex = (currentIndex - 1 + projectData.contentCount) % projectData.contentCount;
              openFullscreen(currentIndex);
            }
            if (e.key === 'ArrowRight') {
              // Stop any playing video first
              const video = fullscreenContent.querySelector('video');
              if (video) {
                video.pause();
                video.currentTime = 0;
              }
              
              currentIndex = (currentIndex + 1) % projectData.contentCount;
              openFullscreen(currentIndex);
            }
          }
        });

        // Also allow click navigation on the image itself (but not videos)
        fullscreenContent.addEventListener('click', (e) => {
          // Only navigate on image click, not video click
          if (e.target.tagName === 'IMG' && !galleryContent[currentIndex].isVideo) {
            e.stopPropagation();
            // Stop any playing video first
            const video = fullscreenContent.querySelector('video');
            if (video) {
              video.pause();
              video.currentTime = 0;
            }
            
            currentIndex = (currentIndex + 1) % projectData.contentCount;
            openFullscreen(currentIndex);
          }
        });

        // Optional: Add swipe support for touch devices
        let touchStartX = 0;
        fullscreenOverlay.addEventListener('touchstart', (e) => {
          touchStartX = e.changedTouches[0].screenX;
        });

        fullscreenOverlay.addEventListener('touchend', (e) => {
          const touchEndX = e.changedTouches[0].screenX;
          const diffX = touchStartX - touchEndX;

          if (Math.abs(diffX) > 50) { // Minimum swipe distance
            // Stop any playing video first
            const video = fullscreenContent.querySelector('video');
            if (video) {
              video.pause();
              video.currentTime = 0;
            }
            
            if (diffX > 0) {
              // Swipe left - next
              currentIndex = (currentIndex + 1) % projectData.contentCount;
            } else {
              // Swipe right - previous
              currentIndex = (currentIndex - 1 + projectData.contentCount) % projectData.contentCount;
            }
            openFullscreen(currentIndex);
          }
        });
      }
    });
  </script>
</body>
</html>